---
- hosts: all

  tasks:
    # - name: Update homebrew
    #   homebrew:
    #     update_homebrew: true

    - name: Install packages
      package:
        name:
          - bat
          - git-delta
          - tree
          - the_silver_searcher
          - fish
          - tmux
        state: present

    - name: Link dotfiles
      vars:
        dotfiles: "{{ playbook_dir | dirname }}"
      file:
        src: "{{ item.src }}"
        dest: "{{ item.dest }}"
        state: link
      with_items:
        - src: "{{ dotfiles }}/gitconfig"
          dest: ~/.gitconfig
        - src: "{{ dotfiles }}/gitignore"
          dest: ~/.gitignore
        - src: "{{ dotfiles }}/tmux"
          dest: ~/.config/tmux
        - src: "{{ dotfiles }}/fish"
          dest: ~/.config/fish
        - src: "{{ dotfiles }}/nvim"
          dest: ~/.config/nvim
